<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1180" width="1800" height="1180" font-family="'SF Pro Display', 'Segoe UI', system-ui, sans-serif">
  <defs>
    <marker id="arrow" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
      <path d="M0,0 L0,6 L8,3 z" fill="#4A5568"/>
    </marker>
    <marker id="arrow-blue" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
      <path d="M0,0 L0,6 L8,3 z" fill="#3B82F6"/>
    </marker>
    <marker id="arrow-green" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
      <path d="M0,0 L0,6 L8,3 z" fill="#10B981"/>
    </marker>
    <marker id="arrow-purple" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
      <path d="M0,0 L0,6 L8,3 z" fill="#8B5CF6"/>
    </marker>
    <filter id="glow">
      <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
      <feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge>
    </filter>
    <linearGradient id="bgGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#080812;stop-opacity:1"/>
      <stop offset="100%" style="stop-color:#0D0D1A;stop-opacity:1"/>
    </linearGradient>
    <linearGradient id="eyeGrad" cx="40%" cy="35%" r="50%" fx="40%" fy="35%" gradientUnits="objectBoundingBox">
      <stop offset="0%" style="stop-color:#ffffff"/>
      <stop offset="60%" style="stop-color:#e0e0f0"/>
      <stop offset="100%" style="stop-color:#c0c0d8"/>
    </linearGradient>
  </defs>

  <!-- Background -->
  <rect width="1800" height="1180" fill="url(#bgGrad)" rx="16"/>
  <rect width="1800" height="1180" fill="none" stroke="#1E2040" stroke-width="2" rx="16"/>

  <!-- Title Bar -->
  <rect x="0" y="0" width="1800" height="64" fill="#0E0E1C" rx="16"/>
  <rect x="0" y="48" width="1800" height="16" fill="#0E0E1C"/>

  <!-- Eye icon -->
  <circle cx="48" cy="32" r="22" fill="#E8E8F0" filter="url(#glow)"/>
  <circle cx="48" cy="32" r="13" fill="#3B82F6"/>
  <circle cx="48" cy="32" r="6" fill="#1a1a2e"/>
  <circle cx="51" cy="29" r="2.5" fill="white" opacity="0.9"/>

  <text x="82" y="38" font-size="22" font-weight="700" fill="#F0F0F8" letter-spacing="-0.5">Cyclop One</text>
  <text x="220" y="38" font-size="15" fill="#6060A0">— System Architecture</text>

  <text x="1680" y="38" font-size="12" fill="#404060" text-anchor="middle">v0.1 · 2026</text>

  <!-- ═══════════════════════════════════════════════════════════ -->
  <!-- ROW 1: USER INPUTS -->
  <!-- ═══════════════════════════════════════════════════════════ -->
  <text x="900" y="100" font-size="11" fill="#404070" text-anchor="middle" letter-spacing="3" font-weight="600">USER INPUTS</text>

  <!-- FloatingDot UI -->
  <rect x="80" y="108" width="200" height="72" rx="10" fill="#0F1628" stroke="#2A3878" stroke-width="1.5"/>
  <text x="180" y="129" font-size="11" fill="#6080D0" text-anchor="middle" font-weight="600">FLOATING DOT UI</text>
  <text x="180" y="147" font-size="10" fill="#4060A0" text-anchor="middle">Eye icon · Popover</text>
  <text x="180" y="163" font-size="10" fill="#4060A0" text-anchor="middle">Chat input · History</text>

  <!-- Hotkey -->
  <rect x="310" y="108" width="200" height="72" rx="10" fill="#0F1628" stroke="#2A3878" stroke-width="1.5"/>
  <text x="410" y="129" font-size="11" fill="#6080D0" text-anchor="middle" font-weight="600">GLOBAL HOTKEY</text>
  <text x="410" y="147" font-size="10" fill="#4060A0" text-anchor="middle">⌘⇧A · Toggle popover</text>
  <text x="410" y="163" font-size="10" fill="#4060A0" text-anchor="middle">Esc · Emergency stop</text>

  <!-- Telegram -->
  <rect x="540" y="108" width="200" height="72" rx="10" fill="#0F1628" stroke="#2A3878" stroke-width="1.5"/>
  <text x="640" y="129" font-size="11" fill="#6080D0" text-anchor="middle" font-weight="600">TELEGRAM BOT</text>
  <text x="640" y="147" font-size="10" fill="#4060A0" text-anchor="middle">/run · /stop · /status</text>
  <text x="640" y="163" font-size="10" fill="#4060A0" text-anchor="middle">/screenshot · long-poll</text>

  <!-- DistributedNotification -->
  <rect x="770" y="108" width="230" height="72" rx="10" fill="#0F1628" stroke="#2A3878" stroke-width="1.5"/>
  <text x="885" y="129" font-size="11" fill="#6080D0" text-anchor="middle" font-weight="600">DISTRIBUTED NOTIF</text>
  <text x="885" y="147" font-size="10" fill="#4060A0" text-anchor="middle">com.cyclop.one.command</text>
  <text x="885" y="163" font-size="10" fill="#4060A0" text-anchor="middle">External CLI · OpenClaw</text>

  <!-- Arrows from inputs down -->
  <line x1="180" y1="180" x2="180" y2="218" stroke="#2A3878" stroke-width="1.5" marker-end="url(#arrow)"/>
  <line x1="410" y1="180" x2="410" y2="218" stroke="#2A3878" stroke-width="1.5" marker-end="url(#arrow)"/>
  <line x1="640" y1="180" x2="640" y2="218" stroke="#2A3878" stroke-width="1.5" marker-end="url(#arrow)"/>
  <line x1="885" y1="180" x2="885" y2="218" stroke="#2A3878" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- ═══════════════════════════════════════════════════════════ -->
  <!-- ROW 2: GATEWAY + COORDINATOR -->
  <!-- ═══════════════════════════════════════════════════════════ -->

  <!-- AgentCoordinator -->
  <rect x="80" y="218" width="380" height="70" rx="10" fill="#12112A" stroke="#3040A0" stroke-width="1.5"/>
  <text x="270" y="244" font-size="12" fill="#8090E0" text-anchor="middle" font-weight="700">AgentCoordinator</text>
  <text x="270" y="261" font-size="10" fill="#5060A0" text-anchor="middle">@MainActor UI bridge · State management</text>
  <text x="270" y="276" font-size="10" fill="#5060A0" text-anchor="middle">Confirmation dialogs · Message streaming</text>

  <!-- CommandGateway -->
  <rect x="490" y="218" width="440" height="70" rx="10" fill="#12112A" stroke="#3040A0" stroke-width="1.5"/>
  <text x="710" y="244" font-size="12" fill="#8090E0" text-anchor="middle" font-weight="700">CommandGateway</text>
  <text x="710" y="261" font-size="10" fill="#5060A0" text-anchor="middle">Unified command entry · Command queue</text>
  <text x="710" y="276" font-size="10" fill="#5060A0" text-anchor="middle">LocalReplyChannel · TelegramReplyChannel · Routes results back</text>

  <!-- Converging arrows to orchestrator -->
  <line x1="270" y1="288" x2="270" y2="315" stroke="#3040A0" stroke-width="1.5"/>
  <line x1="710" y1="288" x2="710" y2="315" stroke="#3040A0" stroke-width="1.5"/>
  <line x1="270" y1="315" x2="500" y2="315" stroke="#3040A0" stroke-width="1.5"/>
  <line x1="500" y1="315" x2="710" y2="315" stroke="#3040A0" stroke-width="1.5"/>
  <line x1="490" y1="315" x2="490" y2="335" stroke="#3040A0" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- ═══════════════════════════════════════════════════════════ -->
  <!-- ROW 3: ORCHESTRATOR -->
  <!-- ═══════════════════════════════════════════════════════════ -->

  <!-- Orchestrator box (wide) -->
  <rect x="80" y="335" width="870" height="110" rx="12" fill="#0F1820" stroke="#1E6040" stroke-width="2"/>
  <text x="515" y="360" font-size="13" fill="#40C080" text-anchor="middle" font-weight="700" letter-spacing="0.5">ORCHESTRATOR</text>

  <!-- Sub-components inside Orchestrator -->
  <rect x="100" y="368" width="185" height="62" rx="8" fill="#0A1418" stroke="#156030" stroke-width="1"/>
  <text x="193" y="385" font-size="10" fill="#30A060" text-anchor="middle" font-weight="600">Run Lifecycle</text>
  <text x="193" y="400" font-size="9" fill="#206040" text-anchor="middle">startRun() · cancelRun()</text>
  <text x="193" y="413" font-size="9" fill="#206040" text-anchor="middle">Intent classification</text>

  <rect x="300" y="368" width="185" height="62" rx="8" fill="#0A1418" stroke="#156030" stroke-width="1"/>
  <text x="393" y="385" font-size="10" fill="#30A060" text-anchor="middle" font-weight="600">RunJournal</text>
  <text x="393" y="400" font-size="9" fill="#206040" text-anchor="middle">Event-sourced log</text>
  <text x="393" y="413" font-size="9" fill="#206040" text-anchor="middle">Crash recovery · Audit</text>

  <rect x="500" y="368" width="185" height="62" rx="8" fill="#0A1418" stroke="#156030" stroke-width="1"/>
  <text x="593" y="385" font-size="10" fill="#30A060" text-anchor="middle" font-weight="600">Budget Manager</text>
  <text x="593" y="400" font-size="9" fill="#206040" text-anchor="middle">Max iterations · Tokens</text>
  <text x="593" y="413" font-size="9" fill="#206040" text-anchor="middle">Early warning · Hard stop</text>

  <rect x="700" y="368" width="230" height="62" rx="8" fill="#0A1418" stroke="#156030" stroke-width="1"/>
  <text x="815" y="385" font-size="10" fill="#30A060" text-anchor="middle" font-weight="600">Intent Classifier</text>
  <text x="815" y="400" font-size="9" fill="#206040" text-anchor="middle">simple / multi-step / complex</text>
  <text x="815" y="413" font-size="9" fill="#206040" text-anchor="middle">Skill match → route selection</text>

  <!-- Arrow from Orchestrator to Main Loop -->
  <line x1="490" y1="445" x2="490" y2="472" stroke="#10B981" stroke-width="2" marker-end="url(#arrow-green)"/>

  <!-- ═══════════════════════════════════════════════════════════ -->
  <!-- ROW 4: REACTIVE LOOP (MAIN) -->
  <!-- ═══════════════════════════════════════════════════════════ -->

  <!-- Main loop box -->
  <rect x="80" y="472" width="870" height="148" rx="12" fill="#150F28" stroke="#5020A0" stroke-width="2.5"/>
  <!-- "DEFAULT" badge -->
  <rect x="840" y="478" width="96" height="20" rx="10" fill="#5020A0"/>
  <text x="888" y="492" font-size="10" fill="white" text-anchor="middle" font-weight="600">DEFAULT</text>
  <text x="380" y="497" font-size="13" fill="#A060F0" text-anchor="middle" font-weight="700" letter-spacing="0.5">REACTIVE LOOP ACTOR</text>
  <text x="380" y="513" font-size="10" fill="#6040A0" text-anchor="middle">Vision-first · No conversation history · ~2.2K tokens/iteration · Max 35 iterations</text>

  <!-- Steps -->
  <rect x="100" y="522" width="120" height="82" rx="7" fill="#0E0A20" stroke="#3A1880" stroke-width="1"/>
  <text x="160" y="540" font-size="10" fill="#8060D0" text-anchor="middle" font-weight="600">① PERCEIVE</text>
  <text x="160" y="555" font-size="9" fill="#5040A0" text-anchor="middle">Screenshot</text>
  <text x="160" y="569" font-size="9" fill="#5040A0" text-anchor="middle">ScreenCaptureKit</text>
  <text x="160" y="583" font-size="9" fill="#5040A0" text-anchor="middle">AX tree read</text>
  <text x="160" y="597" font-size="9" fill="#5040A0" text-anchor="middle">Adaptive skip</text>

  <line x1="220" y1="563" x2="236" y2="563" stroke="#3A1880" stroke-width="1.5" marker-end="url(#arrow-purple)"/>

  <rect x="236" y="522" width="128" height="82" rx="7" fill="#0E0A20" stroke="#3A1880" stroke-width="1"/>
  <text x="300" y="540" font-size="10" fill="#8060D0" text-anchor="middle" font-weight="600">② REASON</text>
  <text x="300" y="555" font-size="9" fill="#5040A0" text-anchor="middle">System prompt</text>
  <text x="300" y="569" font-size="9" fill="#5040A0" text-anchor="middle">Goal + skill ctx</text>
  <text x="300" y="583" font-size="9" fill="#5040A0" text-anchor="middle">Memory hints</text>
  <text x="300" y="597" font-size="9" fill="#5040A0" text-anchor="middle">Claude Sonnet</text>

  <line x1="364" y1="563" x2="380" y2="563" stroke="#3A1880" stroke-width="1.5" marker-end="url(#arrow-purple)"/>

  <rect x="380" y="522" width="128" height="82" rx="7" fill="#0E0A20" stroke="#3A1880" stroke-width="1"/>
  <text x="444" y="540" font-size="10" fill="#8060D0" text-anchor="middle" font-weight="600">③ DECIDE</text>
  <text x="444" y="555" font-size="9" fill="#5040A0" text-anchor="middle">JSON action</text>
  <text x="444" y="569" font-size="9" fill="#5040A0" text-anchor="middle">ReactiveParser</text>
  <text x="444" y="583" font-size="9" fill="#5040A0" text-anchor="middle">Coord rounding</text>
  <text x="444" y="597" font-size="9" fill="#5040A0" text-anchor="middle">Fingerprint hash</text>

  <line x1="508" y1="563" x2="524" y2="563" stroke="#3A1880" stroke-width="1.5" marker-end="url(#arrow-purple)"/>

  <rect x="524" y="522" width="128" height="82" rx="7" fill="#0E0A20" stroke="#3A1880" stroke-width="1"/>
  <text x="588" y="540" font-size="10" fill="#8060D0" text-anchor="middle" font-weight="600">④ ACT</text>
  <text x="588" y="555" font-size="9" fill="#5040A0" text-anchor="middle">ToolExecution</text>
  <text x="588" y="569" font-size="9" fill="#5040A0" text-anchor="middle">SafetyGate</text>
  <text x="588" y="583" font-size="9" fill="#5040A0" text-anchor="middle">CGEvent/AX</text>
  <text x="588" y="597" font-size="9" fill="#5040A0" text-anchor="middle">AppleScript</text>

  <line x1="652" y1="563" x2="668" y2="563" stroke="#3A1880" stroke-width="1.5" marker-end="url(#arrow-purple)"/>

  <rect x="668" y="522" width="128" height="82" rx="7" fill="#0E0A20" stroke="#3A1880" stroke-width="1"/>
  <text x="732" y="540" font-size="10" fill="#8060D0" text-anchor="middle" font-weight="600">⑤ EVALUATE</text>
  <text x="732" y="555" font-size="9" fill="#5040A0" text-anchor="middle">Done token?</text>
  <text x="732" y="569" font-size="9" fill="#5040A0" text-anchor="middle">Stuck detect</text>
  <text x="732" y="583" font-size="9" fill="#5040A0" text-anchor="middle">aHash 8×8</text>
  <text x="732" y="597" font-size="9" fill="#5040A0" text-anchor="middle">8-window ring</text>

  <!-- Loop back arrow -->
  <path d="M 796,563 Q 840,563 840,535 Q 840,508 160,508 Q 130,508 130,522" fill="none" stroke="#3A1880" stroke-width="1.5" stroke-dasharray="4,3" marker-end="url(#arrow-purple)"/>
  <text x="500" y="507" font-size="9" fill="#5040A0" text-anchor="middle">loop until complete / stuck / budget exceeded</text>

  <!-- Arrow down from reactive loop -->
  <line x1="490" y1="620" x2="490" y2="648" stroke="#8B5CF6" stroke-width="2" marker-end="url(#arrow-purple)"/>

  <!-- ═══════════════════════════════════════════════════════════ -->
  <!-- ROW 5: TOOL EXECUTION SYSTEM -->
  <!-- ═══════════════════════════════════════════════════════════ -->

  <!-- Tool Execution outer box -->
  <rect x="80" y="648" width="870" height="168" rx="12" fill="#1A0E10" stroke="#901828" stroke-width="2"/>
  <text x="515" y="673" font-size="13" fill="#E04060" text-anchor="middle" font-weight="700" letter-spacing="0.5">TOOL EXECUTION SYSTEM</text>

  <!-- Safety Gate -->
  <rect x="100" y="682" width="200" height="118" rx="8" fill="#120810" stroke="#601020" stroke-width="1.5"/>
  <text x="200" y="700" font-size="11" fill="#D03050" text-anchor="middle" font-weight="700">ActionSafetyGate</text>
  <rect x="112" y="706" width="176" height="24" rx="4" fill="#1A0C10" stroke="#401018" stroke-width="1"/>
  <text x="200" y="723" font-size="9" fill="#903040" text-anchor="middle">Phase 1: Heuristics (~0ms)</text>
  <rect x="112" y="734" width="176" height="24" rx="4" fill="#1A0C10" stroke="#401018" stroke-width="1"/>
  <text x="200" y="751" font-size="9" fill="#903040" text-anchor="middle">Phase 2: LLM fallback (~3s)</text>
  <text x="200" y="772" font-size="9" fill="#602030" text-anchor="middle">safe · moderate · high · critical</text>
  <text x="200" y="786" font-size="9" fill="#602030" text-anchor="middle">Audit logging · Session cache</text>

  <!-- Tool Handlers (4 boxes) -->
  <rect x="320" y="682" width="155" height="118" rx="8" fill="#120810" stroke="#601020" stroke-width="1"/>
  <text x="398" y="700" font-size="10" fill="#D03050" text-anchor="middle" font-weight="600">UIInput</text>
  <text x="398" y="715" font-size="9" fill="#702030" text-anchor="middle">click · right_click</text>
  <text x="398" y="729" font-size="9" fill="#702030" text-anchor="middle">type_text · scroll</text>
  <text x="398" y="743" font-size="9" fill="#702030" text-anchor="middle">press_key</text>
  <text x="398" y="757" font-size="9" fill="#702030" text-anchor="middle">drag · move_mouse</text>
  <text x="398" y="771" font-size="9" fill="#702030" text-anchor="middle">CGEvent · AX API</text>

  <rect x="485" y="682" width="155" height="118" rx="8" fill="#120810" stroke="#601020" stroke-width="1"/>
  <text x="563" y="700" font-size="10" fill="#D03050" text-anchor="middle" font-weight="600">ScreenCapture</text>
  <text x="563" y="715" font-size="9" fill="#702030" text-anchor="middle">take_screenshot</text>
  <text x="563" y="729" font-size="9" fill="#702030" text-anchor="middle">open_application</text>
  <text x="563" y="743" font-size="9" fill="#702030" text-anchor="middle">open_url</text>
  <text x="563" y="757" font-size="9" fill="#702030" text-anchor="middle">NSWorkspace · SCKit</text>
  <text x="563" y="771" font-size="9" fill="#702030" text-anchor="middle">PID-filtered capture</text>

  <rect x="650" y="682" width="140" height="118" rx="8" fill="#120810" stroke="#601020" stroke-width="1"/>
  <text x="720" y="700" font-size="10" fill="#D03050" text-anchor="middle" font-weight="600">Shell</text>
  <text x="720" y="715" font-size="9" fill="#702030" text-anchor="middle">run_shell_command</text>
  <text x="720" y="729" font-size="9" fill="#702030" text-anchor="middle">run_applescript</text>
  <text x="720" y="743" font-size="9" fill="#702030" text-anchor="middle">NSAppleScript</text>
  <text x="720" y="757" font-size="9" fill="#702030" text-anchor="middle">Process() executor</text>
  <text x="720" y="771" font-size="9" fill="#702030" text-anchor="middle">Timeout: 30s</text>

  <rect x="800" y="682" width="130" height="118" rx="8" fill="#120810" stroke="#601020" stroke-width="1"/>
  <text x="865" y="700" font-size="10" fill="#D03050" text-anchor="middle" font-weight="600">Memory</text>
  <text x="865" y="715" font-size="9" fill="#702030" text-anchor="middle">vault_read</text>
  <text x="865" y="729" font-size="9" fill="#702030" text-anchor="middle">vault_write</text>
  <text x="865" y="743" font-size="9" fill="#702030" text-anchor="middle">task_complete</text>
  <text x="865" y="757" font-size="9" fill="#702030" text-anchor="middle">remember/recall</text>
  <text x="865" y="771" font-size="9" fill="#702030" text-anchor="middle">Obsidian vault</text>

  <!-- Arrow down from tools -->
  <line x1="490" y1="816" x2="490" y2="844" stroke="#E04060" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- ═══════════════════════════════════════════════════════════ -->
  <!-- ROW 6: VERIFICATION + MEMORY (side by side) -->
  <!-- ═══════════════════════════════════════════════════════════ -->

  <!-- Verification Engine -->
  <rect x="80" y="844" width="415" height="110" rx="12" fill="#101820" stroke="#206070" stroke-width="1.5"/>
  <text x="288" y="868" font-size="12" fill="#40B0C0" text-anchor="middle" font-weight="700">Verification Engine</text>
  <rect x="100" y="876" width="180" height="62" rx="6" fill="#0A1218" stroke="#154050" stroke-width="1"/>
  <text x="190" y="893" font-size="10" fill="#3090A0" text-anchor="middle" font-weight="600">Primary: LLM Vision</text>
  <text x="190" y="908" font-size="9" fill="#205060" text-anchor="middle">Claude Haiku · Score 0–100</text>
  <text x="190" y="922" font-size="9" fill="#205060" text-anchor="middle">Threshold ≥70 → pass</text>
  <rect x="294" y="876" width="180" height="62" rx="6" fill="#0A1218" stroke="#154050" stroke-width="1"/>
  <text x="384" y="893" font-size="10" fill="#3090A0" text-anchor="middle" font-weight="600">Fallback: Heuristic</text>
  <text x="384" y="908" font-size="9" fill="#205060" text-anchor="middle">30% visual + 30% struct</text>
  <text x="384" y="922" font-size="9" fill="#205060" text-anchor="middle">+ 40% output diff</text>

  <!-- Memory System -->
  <rect x="515" y="844" width="435" height="110" rx="12" fill="#0E1A10" stroke="#206040" stroke-width="1.5"/>
  <text x="733" y="868" font-size="12" fill="#40B060" text-anchor="middle" font-weight="700">Memory System</text>
  <rect x="530" y="876" width="190" height="62" rx="6" fill="#081210" stroke="#155030" stroke-width="1"/>
  <text x="625" y="893" font-size="10" fill="#30A050" text-anchor="middle" font-weight="600">MemoryService</text>
  <text x="625" y="908" font-size="9" fill="#20503A" text-anchor="middle">Obsidian vault · 15K tokens</text>
  <text x="625" y="922" font-size="9" fill="#20503A" text-anchor="middle">Episodic · Semantic · Working</text>
  <rect x="730" y="876" width="205" height="62" rx="6" fill="#081210" stroke="#155030" stroke-width="1"/>
  <text x="833" y="893" font-size="10" fill="#30A050" text-anchor="middle" font-weight="600">ProceduralMemory</text>
  <text x="833" y="908" font-size="9" fill="#20503A" text-anchor="middle">App step sequences</text>
  <text x="833" y="922" font-size="9" fill="#20503A" text-anchor="middle">Trap patterns · Learning</text>

  <!-- Memory loop back to Orchestrator -->
  <path d="M 60,900 Q 48,900 48,400 Q 48,370 80,370" fill="none" stroke="#20503A" stroke-width="1.5" stroke-dasharray="5,4" marker-end="url(#arrow-green)"/>
  <text x="36" y="700" font-size="9" fill="#206040" transform="rotate(-90, 36, 700)" text-anchor="middle">memory injection</text>

  <!-- ═══════════════════════════════════════════════════════════ -->
  <!-- RIGHT COLUMN: SKILLS SYSTEM -->
  <!-- ═══════════════════════════════════════════════════════════ -->

  <!-- Skills System -->
  <rect x="1010" y="88" width="380" height="432" rx="14" fill="#161010" stroke="#785020" stroke-width="2"/>
  <text x="1200" y="115" font-size="13" fill="#D09040" text-anchor="middle" font-weight="700" letter-spacing="0.5">SKILLS SYSTEM</text>

  <!-- Skill file format -->
  <rect x="1030" y="124" width="340" height="138" rx="8" fill="#0E0C08" stroke="#504020" stroke-width="1"/>
  <text x="1200" y="142" font-size="10" fill="#A07030" text-anchor="middle" font-weight="600">Skill File Format (Markdown)</text>
  <text x="1042" y="158" font-size="9" fill="#705030" font-family="'SF Mono', monospace"># SKILL: twitter-post</text>
  <text x="1042" y="172" font-size="9" fill="#705030" font-family="'SF Mono', monospace">## Triggers</text>
  <text x="1042" y="186" font-size="9" fill="#705030" font-family="'SF Mono', monospace">  - `(?i)\btweet\b`</text>
  <text x="1042" y="200" font-size="9" fill="#705030" font-family="'SF Mono', monospace">## Steps</text>
  <text x="1042" y="214" font-size="9" fill="#705030" font-family="'SF Mono', monospace">  1. Check if X.com already open</text>
  <text x="1042" y="228" font-size="9" fill="#705030" font-family="'SF Mono', monospace">  2. Call open_url("https://x.com")</text>
  <text x="1042" y="242" font-size="9" fill="#705030" font-family="'SF Mono', monospace">## MaxIterations: 20</text>
  <text x="1042" y="256" font-size="9" fill="#705030" font-family="'SF Mono', monospace">## Permissions: network, browser</text>

  <!-- Skill Registry -->
  <rect x="1030" y="272" width="340" height="100" rx="8" fill="#0E0C08" stroke="#504020" stroke-width="1"/>
  <text x="1200" y="290" font-size="10" fill="#A07030" text-anchor="middle" font-weight="600">SkillRegistry (actor)</text>
  <text x="1200" y="307" font-size="9" fill="#705030" text-anchor="middle">Loads: built-in + ~/.cyclopone/skills/ + plugins</text>
  <text x="1200" y="321" font-size="9" fill="#705030" text-anchor="middle">Pre-compiles regex triggers at launch</text>
  <text x="1200" y="335" font-size="9" fill="#705030" text-anchor="middle">Matches skills → injects steps into system prompt</text>
  <text x="1200" y="349" font-size="9" fill="#705030" text-anchor="middle">Overrides: permissions · MaxIterations</text>
  <text x="1200" y="363" font-size="9" fill="#705030" text-anchor="middle">Self-authoring: agent can write new skills</text>

  <!-- Skill locations -->
  <rect x="1030" y="382" width="155" height="122" rx="8" fill="#0E0C08" stroke="#504020" stroke-width="1"/>
  <text x="1108" y="400" font-size="10" fill="#A07030" text-anchor="middle" font-weight="600">Built-in Skills</text>
  <text x="1108" y="416" font-size="9" fill="#705030" text-anchor="middle">twitter-post</text>
  <text x="1108" y="430" font-size="9" fill="#705030" text-anchor="middle">gmail-compose</text>
  <text x="1108" y="444" font-size="9" fill="#705030" text-anchor="middle">whatsapp-send</text>
  <text x="1108" y="458" font-size="9" fill="#705030" text-anchor="middle">+ 10 more</text>
  <text x="1108" y="475" font-size="9" fill="#604030" text-anchor="middle">~/.cyclopone/skills/</text>
  <text x="1108" y="489" font-size="9" fill="#604030" text-anchor="middle">*.md files</text>

  <rect x="1195" y="382" width="175" height="122" rx="8" fill="#0E0C08" stroke="#504020" stroke-width="1"/>
  <text x="1283" y="400" font-size="10" fill="#A07030" text-anchor="middle" font-weight="600">Plugin Packages</text>
  <text x="1283" y="416" font-size="9" fill="#705030" text-anchor="middle">npm packages</text>
  <text x="1283" y="430" font-size="9" fill="#705030" text-anchor="middle">~/.cyclopone/plugins/</text>
  <text x="1283" y="444" font-size="9" fill="#705030" text-anchor="middle">package.json</text>
  <text x="1283" y="458" font-size="9" fill="#705030" text-anchor="middle">skills/*.md</text>
  <text x="1283" y="472" font-size="9" fill="#705030" text-anchor="middle">agents/*.md</text>
  <text x="1283" y="489" font-size="9" fill="#604030" text-anchor="middle">Marketplace</text>

  <!-- Arrow from skills to orchestrator -->
  <line x1="1010" y1="310" x2="960" y2="390" stroke="#785020" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#arrow)"/>
  <text x="1010" y="355" font-size="9" fill="#805030" text-anchor="middle">skill context</text>
  <text x="1010" y="367" font-size="9" fill="#805030" text-anchor="middle">→ system prompt</text>

  <!-- ═══════════════════════════════════════════════════════════ -->
  <!-- RIGHT COLUMN: EXTERNAL SERVICES -->
  <!-- ═══════════════════════════════════════════════════════════ -->

  <rect x="1010" y="540" width="380" height="424" rx="14" fill="#101416" stroke="#205060" stroke-width="2"/>
  <text x="1200" y="567" font-size="13" fill="#4090B0" text-anchor="middle" font-weight="700" letter-spacing="0.5">EXTERNAL SERVICES</text>

  <!-- Claude API -->
  <rect x="1030" y="578" width="340" height="100" rx="8" fill="#0A1018" stroke="#154060" stroke-width="1"/>
  <text x="1200" y="596" font-size="10" fill="#3080B0" text-anchor="middle" font-weight="600">ClaudeAPIService</text>
  <rect x="1042" y="604" width="95" height="20" rx="4" fill="#0E1820" stroke="#103040" stroke-width="1"/>
  <text x="1090" y="619" font-size="9" fill="#507090" text-anchor="middle">Haiku 4.5 · Fast</text>
  <rect x="1145" y="604" width="95" height="20" rx="4" fill="#0E1820" stroke="#103040" stroke-width="1"/>
  <text x="1193" y="619" font-size="9" fill="#507090" text-anchor="middle">Sonnet 4.6 · Smart</text>
  <rect x="1248" y="604" width="100" height="20" rx="4" fill="#0E1820" stroke="#103040" stroke-width="1"/>
  <text x="1298" y="619" font-size="9" fill="#507090" text-anchor="middle">Opus 4.6 · Deep</text>
  <text x="1200" y="645" font-size="9" fill="#305060" text-anchor="middle">SSE streaming · TLS cert pinning (SPKI)</text>
  <text x="1200" y="659" font-size="9" fill="#305060" text-anchor="middle">Retry + exponential backoff · Circuit breaker</text>
  <text x="1200" y="673" font-size="9" fill="#305060" text-anchor="middle">Token tracking · Model tier routing</text>

  <!-- ScreenCapture -->
  <rect x="1030" y="690" width="155" height="90" rx="8" fill="#0A1018" stroke="#154060" stroke-width="1"/>
  <text x="1108" y="708" font-size="10" fill="#3080B0" text-anchor="middle" font-weight="600">ScreenCapture</text>
  <text x="1108" y="723" font-size="9" fill="#305060" text-anchor="middle">ScreenCaptureKit</text>
  <text x="1108" y="737" font-size="9" fill="#305060" text-anchor="middle">PID-filtered windows</text>
  <text x="1108" y="751" font-size="9" fill="#305060" text-anchor="middle">Cyclop One excluded</text>
  <text x="1108" y="765" font-size="9" fill="#305060" text-anchor="middle">PNG · 1280px max</text>

  <!-- Accessibility -->
  <rect x="1195" y="690" width="175" height="90" rx="8" fill="#0A1018" stroke="#154060" stroke-width="1"/>
  <text x="1283" y="708" font-size="10" fill="#3080B0" text-anchor="middle" font-weight="600">Accessibility</text>
  <text x="1283" y="723" font-size="9" fill="#305060" text-anchor="middle">AXIsProcessTrusted</text>
  <text x="1283" y="737" font-size="9" fill="#305060" text-anchor="middle">UI tree · 6000 chars</text>
  <text x="1283" y="751" font-size="9" fill="#305060" text-anchor="middle">clickAt · typeText</text>
  <text x="1283" y="765" font-size="9" fill="#305060" text-anchor="middle">pressShortcut · drag</text>

  <!-- Telegram -->
  <rect x="1030" y="794" width="155" height="80" rx="8" fill="#0A1018" stroke="#154060" stroke-width="1"/>
  <text x="1108" y="812" font-size="10" fill="#3080B0" text-anchor="middle" font-weight="600">TelegramService</text>
  <text x="1108" y="827" font-size="9" fill="#305060" text-anchor="middle">Long-poll bot API</text>
  <text x="1108" y="841" font-size="9" fill="#305060" text-anchor="middle">Auth: chat ID</text>
  <text x="1108" y="855" font-size="9" fill="#305060" text-anchor="middle">Progress streaming</text>
  <text x="1108" y="869" font-size="9" fill="#305060" text-anchor="middle">Voice notes (Whisper)</text>

  <!-- Support services -->
  <rect x="1195" y="794" width="175" height="80" rx="8" fill="#0A1018" stroke="#154060" stroke-width="1"/>
  <text x="1283" y="812" font-size="10" fill="#3080B0" text-anchor="middle" font-weight="600">Support Services</text>
  <text x="1283" y="827" font-size="9" fill="#305060" text-anchor="middle">NetworkMonitor</text>
  <text x="1283" y="841" font-size="9" fill="#305060" text-anchor="middle">KeychainService</text>
  <text x="1283" y="855" font-size="9" fill="#305060" text-anchor="middle">UpdateChecker</text>
  <text x="1283" y="869" font-size="9" fill="#305060" text-anchor="middle">OpenClawBridge</text>

  <!-- AppDelegate -->
  <rect x="1030" y="888" width="340" height="55" rx="8" fill="#0A1018" stroke="#154060" stroke-width="1"/>
  <text x="1200" y="907" font-size="10" fill="#3080B0" text-anchor="middle" font-weight="600">AppDelegate · FloatingDot · StatusBar</text>
  <text x="1200" y="922" font-size="9" fill="#305060" text-anchor="middle">NSPanel 48px eye · Popover · Hotkey monitors</text>
  <text x="1200" y="936" font-size="9" fill="#305060" text-anchor="middle">DistributedNotification listener · Onboarding</text>

  <!-- Arrows from services to main loop -->
  <line x1="1010" y1="630" x2="960" y2="563" stroke="#205060" stroke-width="1.5" stroke-dasharray="4,3" marker-end="url(#arrow)"/>
  <text x="1000" y="590" font-size="9" fill="#305070" text-anchor="end">Claude API</text>

  <!-- ═══════════════════════════════════════════════════════════ -->
  <!-- LEGEND -->
  <!-- ═══════════════════════════════════════════════════════════ -->
  <rect x="80" y="980" width="870" height="80" rx="10" fill="#0A0A14" stroke="#1E1E30" stroke-width="1"/>
  <text x="490" y="1000" font-size="11" fill="#404060" text-anchor="middle" font-weight="600" letter-spacing="2">DATA FLOW KEY</text>

  <line x1="110" y1="1020" x2="160" y2="1020" stroke="#10B981" stroke-width="2" marker-end="url(#arrow-green)"/>
  <text x="170" y="1024" font-size="10" fill="#206040">Core orchestration path</text>

  <line x1="310" y1="1020" x2="360" y2="1020" stroke="#8B5CF6" stroke-width="2" marker-end="url(#arrow-purple)"/>
  <text x="370" y="1024" font-size="10" fill="#503070">Reactive loop steps</text>

  <line x1="510" y1="1020" x2="560" y2="1020" stroke="#4A5568" stroke-width="2" stroke-dasharray="5,3" marker-end="url(#arrow)"/>
  <text x="570" y="1024" font-size="10" fill="#404050">Context injection</text>

  <line x1="110" y1="1048" x2="160" y2="1048" stroke="#3B82F6" stroke-width="2" marker-end="url(#arrow-blue)"/>
  <text x="170" y="1052" font-size="10" fill="#204070">UI / user interaction</text>

  <rect x="310" y="1038" width="12" height="12" rx="2" fill="#5020A0"/>
  <text x="330" y="1050" font-size="10" fill="#503070">Default execution path (ReactiveLoop)</text>

  <rect x="510" y="1038" width="12" height="12" rx="2" fill="#901828"/>
  <text x="530" y="1050" font-size="10" fill="#702030">Safety-enforced boundary</text>

  <rect x="1010" y="980" width="380" height="80" rx="10" fill="#0A0A14" stroke="#1E1E30" stroke-width="1"/>
  <text x="1200" y="1002" font-size="11" fill="#404060" text-anchor="middle" font-weight="600" letter-spacing="2">STORAGE PATHS</text>
  <text x="1030" y="1024" font-size="9" fill="#305050" font-family="'SF Mono', monospace">~/Documents/CyclopOne/       ← Obsidian memory vault</text>
  <text x="1030" y="1040" font-size="9" fill="#305050" font-family="'SF Mono', monospace">~/.cyclopone/runs/           ← Event journals</text>
  <text x="1030" y="1056" font-size="9" fill="#305050" font-family="'SF Mono', monospace">~/.cyclopone/skills/         ← User skill files</text>
  <text x="1030" y="1072" font-size="9" fill="#305050" font-family="'SF Mono', monospace">~/.cyclopone/procedural/     ← App step memory</text>
</svg>
